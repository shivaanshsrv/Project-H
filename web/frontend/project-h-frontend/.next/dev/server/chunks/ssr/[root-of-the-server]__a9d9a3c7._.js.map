{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///D:/Amity%20K/NTCC%206th%20Sem/Project-H/web/frontend/project-h-frontend/app/analyse/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\ntype AnalysisResult = {\r\n    panel_count: number;\r\n    system_size_kw: number;\r\n    confidence: number;\r\n    energy?: {\r\n        monthly: number;\r\n        yearly: number;\r\n    };\r\n    overlay_image_url?: string;\r\n};\r\n\r\nexport default function AnalysePage() {\r\n    const [file, setFile] = useState<File | null>(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [result, setResult] = useState<AnalysisResult | null>(null);\r\n    const [error, setError] = useState(\"\");\r\n\r\n    const handleAnalyze = async () => {\r\n        if (!file) {\r\n            setError(\"Please select an image\");\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(\"\");\r\n        setResult(null);\r\n\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append(\"image\", file);\r\n\r\n            const token = localStorage.getItem(\"token\");\r\n\r\n            const res = await axios.post(\r\n                `${process.env.NEXT_PUBLIC_BACKEND_URL}/ai/analyze`,\r\n                formData,\r\n                {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`,\r\n                    },\r\n                }\r\n            );\r\n\r\n            setResult(res.data.analysis || res.data);\r\n        } catch {\r\n            setError(\"Analysis failed. Please try again.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                minHeight: \"100vh\",\r\n                backgroundColor: \"#0f0f0f\",\r\n                padding: \"40px\",\r\n            }}\r\n        >\r\n            <div\r\n                style={{\r\n                    maxWidth: \"720px\",\r\n                    margin: \"auto\",\r\n                    backgroundColor: \"#1a1a1a\",\r\n                    padding: \"32px\",\r\n                    borderRadius: \"8px\",\r\n                    border: \"1px solid #333\",\r\n                }}\r\n            >\r\n                {/* Header */}\r\n                <div\r\n                    style={{\r\n                        display: \"flex\",\r\n                        justifyContent: \"space-between\",\r\n                        marginBottom: \"24px\",\r\n                    }}\r\n                >\r\n                    <h2 style={{ color: \"#fff\" }}>Projectâ€‘H Analysis</h2>\r\n                    <button\r\n                        onClick={() => {\r\n                            localStorage.removeItem(\"token\");\r\n                            window.location.href = \"/login\";\r\n                        }}\r\n                        style={{\r\n                            background: \"transparent\",\r\n                            border: \"none\",\r\n                            color: \"#aaa\",\r\n                            cursor: \"pointer\",\r\n                        }}\r\n                    >\r\n                        Logout\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Upload */}\r\n                <label style={{ color: \"#ddd\", fontWeight: \"bold\" }}>\r\n                    Upload Roof Image\r\n                </label>\r\n                <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={(e) => setFile(e.target.files?.[0] || null)}\r\n                    style={{\r\n                        display: \"block\",\r\n                        margin: \"12px 0 20px\",\r\n                        color: \"#ddd\",\r\n                    }}\r\n                />\r\n\r\n                <button\r\n                    onClick={handleAnalyze}\r\n                    disabled={loading}\r\n                    style={{\r\n                        padding: \"12px 20px\",\r\n                        background: \"#fff\",\r\n                        color: \"#000\",\r\n                        border: \"none\",\r\n                        borderRadius: \"4px\",\r\n                        fontWeight: \"bold\",\r\n                        cursor: \"pointer\",\r\n                    }}\r\n                >\r\n                    {loading ? \"Analyzing...\" : \"Analyze Roof\"}\r\n                </button>\r\n\r\n                {error && (\r\n                    <p style={{ color: \"#ff6b6b\", marginTop: \"12px\" }}>\r\n                        {error}\r\n                    </p>\r\n                )}\r\n\r\n                {/* Results */}\r\n                {result && (\r\n                    <div style={{ marginTop: \"32px\", color: \"#ddd\" }}>\r\n                        <h3 style={{ color: \"#fff\" }}>Results</h3>\r\n\r\n                        <p><b>Panel Count:</b> {result.panel_count}</p>\r\n                        <p><b>System Size:</b> {result.system_size_kw} kW</p>\r\n                        <p><b>Monthly Energy:</b> {result.energy?.monthly} kWh</p>\r\n                        <p><b>Yearly Energy:</b> {result.energy?.yearly} kWh</p>\r\n                        <p><b>Confidence:</b> {result.confidence}</p>\r\n\r\n                        {result.overlay_image_url && (\r\n                            <div style={{ marginTop: \"20px\" }}>\r\n                                <img\r\n                                    src={`${process.env.NEXT_PUBLIC_AI_URL}${result.overlay_image_url}`}\r\n                                    alt=\"Overlay\"\r\n                                    style={{\r\n                                        width: \"100%\",\r\n                                        border: \"1px solid #444\",\r\n                                        borderRadius: \"4px\",\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}